---
layout: default
---

<br/>

<div class="article">
    <div class="panel">
	    <div class="panel-body" style="padding: 15px 55px;">
	        <h1>
	            backbone.hateoas
	            <small>HATEOAS with Backbone</small>
	        </h1>
	        <p>
	            <img src="https://img.shields.io/travis/gomoob/backbone.hateoas.svg" />
	            <img src="https://img.shields.io/coveralls/gomoob/backbone.hateoas.svg" />
	            <img src="https://img.shields.io/github/release/gomoob/backbone.hateoas.svg" />
	        </p>
            <p class="text-justify">
	            backbone.hateoas is a Javascript library which facilitates the use of 
	            <a href="https://en.wikipedia.org/wiki/HATEOAS">HATEOAS</a> (Hypermedia as the Engine of Application 
	            State) and the HAL (Hypertext Application Language) standard in your Backbone and Marionette 
	            applications.
            </p>
            <p class="text-justify">
                To understand what is HATEAOS and what's its place in REST in general we advise you to understand the 
                <a href="http://martinfowler.com/articles/richardsonMaturityModel.html">Richardson Maturity Model</a> 
                and most specifically the 
                <a href="http://martinfowler.com/articles/richardsonMaturityModel.html#level3">REST Level 3 - Hypermedia 
                Controls</a>.
            </p>
            <p class="text-justify">
                Today several standards exists to model REST resources and links between them - 
                <a href="http://stateless.co/hal_specification.html">HAL</a>, 
                <a href="http://www.w3.org/TR/json-ld">JSON-LD</a>, 
                <a href="http://amundsen.com/media-types/collection/">Collection+JSON</a>, 
                <a href="https://github.com/kevinswiber/siren">SIREN</a> to name a 
                few.
            </p>
            <p class="text-justify">
                backbone.hateoas uses the HAL standard because its JSON format is easy to manipulate with Backbone and 
                because we think its the most used one today.
            </p>
            <p class="text-justify">
                The HAL specification is quickly described here 
                <a href="http://stateless.co/hal_specification.html" target="_blank">HAL - Hypertext Application 
                Language</a>, the JSON version of HAL has also been published as an internet draft here : 
                <a href="https://tools.ietf.org/html/draft-kelly-json-hal-06" target="_blank">JSON Hypertext Application 
                Language</a>.
            </p>
            
            <h2 id="getting-started">
                <a id="user-content-getting-started" href="#getting-started" style="margin-left: -40px; opacity: 1;">
                    <span class="glyphicon glyphicon-link" aria-hidden="true"></span>
                </a>
                Getting started
            </h2>
            <h3>
                Quick presentation
            </h3>
            <p class="text-justify">
                The library provides 2 useful classes, <code>Hal.Model</code> and <code>Hal.Collection</code>.
            </p>
            <h4>Hal.Model</h4>
            <p>
                The <code>Hal.Model</code> class extends the <code>Backbone.Model</code> class and adds support to 
                manipulate HAL links and HAL embedded resources.
            </p>
<pre><code class="javascript">
// Instanciation of an Hal.Model object is done the same way as you're used to with a standard Backbone model
var user = new Hal.Model({
    firstName: "John",
    lastName: "Doe",
    _links: {
        avatar: {
            href: "http://localhost/api/users/1/avatar.png" 
        }
    },
    _embedded: {
        address: {
            "city" : "Paris",
            "country" : "France",
            "street" : "142 Rue de Rivoli",
            "zip" : "75001",
            "_links" : {
                "self" : {
                    "href" : "http://localhost/api/addresses/1"
                }
            }
        }
    }
});

// "Direct" properties are accessed using standard Backbone methods
user.get('firstName');
user.get('lastName');

// Getting a link, a link can be manipulated like a Backbone.Model
user.getLink('avatar').get('href');

// Getting an embedded resource, an embedded resource is a Hal.Model
user.getEmbedded('address').get('city');
user.getEmbedded('address').getLink('self').get('href');
</code></pre>
            <p class="text-justify">
                The <code>Hal.Model</code> class has been designed to be very easy to manipulate, we've chosen to create 
                <code>getLink(rel)</code> and <code>getEmbedded(rel)</code> methods to force the developpers to clearly 
                show their intention in the code.
            </p>
            <p class="text-justify">
                For more informations abount the <code>Hal.Model</code> class please read the chapter 
                <a href="#hal.model">Hal.Model</a>.
            </p>
            <h4>Hal.Collection</h4>
            <p class="text-justify">
                The <code>Hal.Collection</code> class extends the <code>Backbone.Collection</code> class by adding 
                utility methods to navigate through an "HAL Collection". The HAL standard does not describe the concept 
                of an HAL collection but most framwork do it (
                <a href="https://apigility.org/documentation/api-primer/halprimer#collections">Apigility</a>, 
                <a href="http://hateoas-php.org/#dealing-with-collections">Willdurand Hateoas</a>, etc.). The 
                <code>Hal.Collection</code> class is configurable and can be used to work with custom pagination 
                parameter names and links.
            </p>
            <p class="text-justify">
                For more informations abount the <code>Hal.Collection</code> class please read the chapter 
                <a href="#hal.model">Hal.Collection</a>.
            </p>
            <h3>
                Install
            </h3>
            <p>
                The easiest way to use the library is to pull it with 
                <a href="http://bower.io" target="_blank">Bower</a> by adding the following dependency inside your 
                <code>bower.json</code> file.
            </p>
<pre><code class="json">{
    "dependencies": {
        "backbone.hateoas" : "~0.1"
    }
}</code></pre>

            <h2>
                Global configuration
            </h2>
            <h3>
                contentType
            </h3>
            <p class="text-justify">
                The HAL standard defines 2 new media types which are <code>application/hal+json</code> and 
                <code>application/hal+xml</code>, it also indicates the following :
            </p>
            <blockquote>
                <p>
                    When serving HAL over HTTP, the Content-Type of the response should contain the relevant media type 
                    name.
                </p>
            </blockquote>
            <p class="text-justify">
                So it defines how the server should respond but is does not define how we should send HTTP POST, PUT and 
                PATCH requests. In fact this is something which seems to be left unspecified deliberatly.
            </p>
            <p class="text-justify">
                The <code>Hal.contentType</code> global configuration parameter allows to configure how your models and 
                collections should be serialized before being sent to the server (i.e it changes the behavior of the 
                Backbone <code><a href="http://backbonejs.org/#Model-toJSON" target="_blank">Model.toJSON()</a></code> 
                and <code><a href="http://backbonejs.org/#Collection-toJSON">Collection.toJSON()</a></code> methods).
            </p>
            <p class="text-justify">
                The current version of the library supports 2 content types : <code>application/json</code> and 
                <code>application/hal+json</code>.
            </p>
            <br/>
            <h4>Sample with <code>application/json</code></h4>
            <p class="text-justify">
                The following sample ...
            </p>
<pre><code class="javascript">// The 'Hal.contentType' parameter is an application wide parameter
// So in most cases it is only configured at one place in your project
Hal.contentType = 'application/json';

...

// Somewhere in the code of the application
var john = new Hal.Model();
john.urlMiddle = 'users';
john.set('id', 'jdoe');
john.fetch({
    success : function() {
        console.log(user.toJSON());     
    }
});
</code></pre>
            <p class="text-justify">
                Will display ...
            </p>
<pre><code class="json">{
    "id": 1,
    "firstName": "John",
    "lastName" : "Doe",
    "address" : {
        "city" : "Paris",
        "country" : "France",
        "street" : "142 Rue de Rivoli",
        "zip" : "75001"
    }
}
</code></pre>
<br/>
            <h4>Sample with <code>application/hal+json</code></h4>
            <p class="text-justify">
                The following sample ...
            </p>
<pre><code class="javascript">// The 'Hal.contentType' parameter is an application wide parameter
// So in most cases it is only configured at one place in your project
Hal.contentType = 'application/hal+json';

...

// Somewhere in the code of the application
var john = new Hal.Model();
john.urlMiddle = 'users';
john.set('id', 'jdoe');
john.fetch({
    success : function() {
        console.log(user.toJSON());     
    }
});
</code></pre>
            <p class="text-justify">
                Will display ...
            </p>
<pre><code class="json">{
    "id": 1,
    "firstName": "John",
    "lastName" : "Doe",
    "_embedded" : {
        "address" : {
            "city" : "Paris",
            "country" : "France",
            "street" : "142 Rue de Rivoli",
            "zip" : "75001",
            "_links" : {
                "self" : {
                    "href" : "http://localhost/backbone.hateoas/test/api/addresses/1"
                }
            }
        }
    },
    "_links" : {
        "address" : {
            "href" : "http://localhost/backbone.hateoas/test/api/addresses/1"
        },
        "self" : { 
            "href" : "http://localhost/backbone.hateoas/test/api/users/1"
        }
    }
}
</code></pre>
            <h3>
                urlRoot
            </h3>
            
            <h2>
                Hal.Model
            </h2>
            <h3>
                urlMiddle
            </h3>
            <h3>
                toJSON
            </h3>
            
            <h2>
                Hal.Collection
            </h2>
            
            <h2>
                Embedded
            </h2>
            
            <h2>
                Links
            </h2>
            
            <h2>
                Release history
            </h2>
	    </div>
    </div>
</div>
